\usepackage{stmaryrd}
\usepackage{framed}

\renewcommand{\leadsto}{\rightsquigarrow}
\newcommand{\dmid}{\ \parallel \ }

\newcommand{\effFalse}{\mathbf{false}}
\newcommand{\effTrue}{\mathbf{true}}
\newcommand{\effLeft}{\mathbf{Left}\ }
\newcommand{\effRight}{\mathbf{Right\ }}
\newcommand{\effFun}{\mathbf{fun}\ }
\newcommand{\effRecFun}{\mathbf{recfun}\ }
\newcommand{\effHandler}{\mathbf{handler}\ }
\newcommand{\effVal}{\mathbf{val}\ }
\newcommand{\effWith}{\mathbf{with}\ }
\newcommand{\effHandle}{\ \mathbf{handle}\ }
\newcommand{\effIf}{\mathbf{if}\ }
\newcommand{\effThen}{\ \mathbf{then}\ }
\newcommand{\effElse}{\ \mathbf{else}\ }
\newcommand{\effAbsurd}{\mathbf{absurd}\ }
\newcommand{\effMatch}{\mathbf{match}\ }
\newcommand{\effLet}{\mathbf{let}\ }
\newcommand{\effIn}{\ \mathbf{in}\ }
\newcommand{\effRec}{\mathbf{rec}\ }
\newcommand{\effEffect}{\mathbf{effect}\ }
\newcommand{\effFinally}{\mathbf{finally}\ }
\newcommand{\effOp}{\mathtt{op}}
\newcommand{\effPerform}{\mathbf{perform}\ }
\newcommand{\tto}{\twoheadrightarrow}

\newcommand{\handlerType}{\Rightarrow}
\newcommand{\boolType}{\mathtt{bool}}
\newcommand{\unitType}{\mathtt{unit}}
\newcommand{\emptyType}{\mathtt{empty}}

\newcommand{\defEq}{\stackrel{\text{def}}{=}}

\newcommand{\cek}[1]{\langle #1 \rangle}
\newcommand{\secd}[1]{\langle #1 \rangle}
\newcommand{\shade}[1]{\langle #1 \rangle}

\newcommand{\irId}{\mathbf{Id}}
\newcommand{\irConst}{\mathbf{Const}}
\newcommand{\irBox}{\mathbf{Box}}
\newcommand{\irFun}{\mathbf{Fun}}
\newcommand{\irHandler}{\mathbf{Handler}}
\newcommand{\irVal}{\mathbf{Return}}
\newcommand{\irIf}{\mathbf{If}}
\newcommand{\irLetIn}{\mathbf{LetIn}}
\newcommand{\irLetRecIn}{\mathbf{LetRecIn}}
\newcommand{\irTopLet}{\mathbf{TopLet}}
\newcommand{\irTopLetRec}{\mathbf{TopLetRec}}
\newcommand{\irPerform}{\mathbf{Perform}}
\newcommand{\irWithHandle}{\mathbf{WithHandle}}
\newcommand{\irBinOp}{\mathbf{BinOp}}
\newcommand{\irFunApp}{\mathbf{FunApp}}
\newcommand{\irGetField}{\mathbf{GetField}}
\newcommand{\irListHead}{\mathbf{ListHead}}
\newcommand{\irListTail}{\mathbf{ListTail}}

\newcommand{\interp}[1]{\llbracket #1 \rrbracket}

\newcommand{\shUnit}{\mathbf{()}}
\newcommand{\shHalt}{\mathbf{halt}}
\newcommand{\shCast}{\mathbf{cast}}
\newcommand{\shRett}{\mathbf{ret2}}
\newcommand{\shApply}{\mathbf{apply}}
\newcommand{\shCastShadow}{\mathbf{castshadow}}
\newcommand{\shKillShadow}{\mathbf{killshadow}}
\newcommand{\shFin}{\mathbf{fin}}
\newcommand{\shThrow}{\mathbf{throw}}

\newcommand{\vmPush}{\textbf{push}}
\newcommand{\vmPop}{\textbf{pop}}
\newcommand{\vmAcc}[1]{\textbf{acc} #1}
\newcommand{\vmConst}[1]{\textbf{const} #1}
\newcommand{\vmHalt}{\textbf{halt}}
\newcommand{\vmJump}[1]{\textbf{jump }#1}
\newcommand{\vmLabel}{\textbf{label}}
\newcommand{\vmBranchIfNot}[1]{\textbf{branchifnot }#1}
\newcommand{\vmApply}{\textbf{apply}}
\newcommand{\vmRet}{\textbf{ret}}
\newcommand{\vmRett}{\textbf{ret2}}
\newcommand{\vmMakeBox}[2]{\textbf{makebox }#1, #2}
\newcommand{\vmGetField}[1]{\textbf{getfield }#1}
\newcommand{\vmListHead}{\textbf{listhead}}
\newcommand{\vmListTail}{\textbf{listtail}}
\newcommand{\vmMakeClosure}[2]{\textbf{makeclosure }#1, #2}
\newcommand{\vmMakeHlosure}[4]{\textbf{makehlosure }#1, #2, #3, #4}
\newcommand{\vmThrow}{\textbf{throw}}

\newcommand{\hlosure}{\mathcal{H}}
\newcommand{\konts}{\mathcal{C}}

\newenvironment{myfigure}[3][0.75]{
    \def\mywidth{#1}
    \def\mycaption{#2}
    \def\mylabel{#3}
    \definecolor{shadecolor}{rgb}{0.95,0.95,0.95}

    \begin{figure}
    \centering
    \begin{minipage}{\mywidth\textwidth}
    \begin{shaded*}
}{
    \caption{\mycaption}
    \label{\mylabel}
    \end{shaded*}
    \end{minipage}
    \end{figure}
}